<h1>
    Liste des utilisateurs
    <clr-dropdown>
        <button clrDropdownTrigger aria-label="Dropdown demo button">
            <clr-icon shape="cog"></clr-icon>
            <clr-icon shape="caret down"></clr-icon>
        </button>
        <clr-dropdown-menu *clrIfOpen>
            <label class="dropdown-header" aria-hidden="true">Users per pages</label>
            <div *ngFor="let size of [5,10,20,50,100]">
                <button clrDropdownItem (click)="changesize(size)">{{size}}</button>
            </div>
        </clr-dropdown-menu>
    </clr-dropdown>
</h1>

<button (click)="addUserModal = true" class="btn btn-success-outline">
    <clr-icon shape="plus" class="is-success"></clr-icon>
    Ajouter un utilisateur
</button>
<button (click)="addRandomUser()" class="btn btn-outline">
    <clr-icon shape="bolt" class=""></clr-icon>
    Generate random user
</button>
<div class="clr-row">
    <div *ngFor="let user of users" class="clr-col-xl-3 clr-col-lg-4 clr-col-md-6 clr-col-12">
        <a class="card clickable">
            <div class="card-header">
                {{user.firstname}} {{user.lastname}}
            </div>
            <div class="card-block">
                <div class="card-media-block">
                    <img class="card-media-image"
                        [src]="user.picture ? user.picture.thumbnail : 'https://via.placeholder.com/400x300?text=Image+not+found'"
                        onError="this.src='assets/images/default-user-icon.jpg'">
                    <div class="card-media-description">
                        <div class="card-media-title">
                            {{user.username}}
                        </div>
                        <div class="card-media-description">
                            {{user.email}}
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-sm btn-link" (click)="showCard(user)">Informations</button>
                            <button class="btn btn-sm btn-warning-outline"
                                (click)="showDeleteUser(user)">Supprimer</button>
                        </div>
                    </div>
                </div>
            </div>
        </a>
    </div>
</div>

<!-- Delete user confirmation Modal -->
<clr-modal [(clrModalOpen)]="addUserModal" [clrModalStaticBackdrop]="false" (keydown.enter)="submit()">
    <h3 class="modal-title">Ajouter un nouvel unitlisateur </h3>
    <div class="modal-body">
        <form clrForm [formGroup]="userForm">
            <clr-input-container>
                <label>Nom</label>
                <input formControlName="lastname" clrInput type="text" name="lastname" />
            </clr-input-container>
            <clr-input-container>
                <label>Pr√©nom</label>
                <input formControlName="firstname" clrInput type="text" name="firstname" />
            </clr-input-container>
            <clr-input-container>
                <label>Username</label>
                <input formControlName="username" clrInput type="text" name="username" required />
                <clr-control-helper>ex: etopin</clr-control-helper>
                <clr-control-error>Please provide a username</clr-control-error>
            </clr-input-container>
            <clr-input-container>
                <label>Email</label>
                <input formControlName="email" clrInput type="email" name="email" required />
                <clr-control-helper>ex: foo@bar.com</clr-control-helper>
                <clr-control-error>Please provide an email</clr-control-error>
            </clr-input-container>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-outline" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" (click)="submit()">Submit</button>
    </div>
</clr-modal>
<!-- More user detail Modal -->
<clr-modal [(clrModalOpen)]="showUser" [clrModalStaticBackdrop]="false">
    <h3 class="modal-title">
        <img class="card-media-image"
            [src]="focusUser.picture ? focusUser.picture.medium : 'https://via.placeholder.com/50x50?text=Image+not+found'">
        {{focusUser.username}}</h3>
    <div class="modal-body">
        <table class="table table-compact table-noborder ">
            <thead>
                <tr>
                    <th>firstname</th>
                    <th>lastname</th>
                    <th>email</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{focusUser.firstname}}</td>
                    <td>{{focusUser.lastname}}</td>
                    <td>{{focusUser.email}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</clr-modal>

<!-- Delete user confirmation Modal -->
<clr-modal [(clrModalOpen)]="deleteUser" [clrModalStaticBackdrop]="false"
    (keydown.enter)="deleteUserFromDatabase(); deleteUser = false">
    <h3 class="modal-title">Delete {{focusUser.username}} from Database ?</h3>
    <div class="modal-body">
        Are you sure you want to delete this user ?
    </div>
    <div class="modal-footer">
        <button class="btn btn-outline" type="button">Cancel</button>
        <button class="btn btn-warning" (click)="deleteUserFromDatabase()">YES</button>
    </div>
</clr-modal>